<br />
<br />
<br />
<div class="container">
  <div class="row">
    <a class="btn btn-link" href="/dang-xuat">Log out</a>
  </div>
  <div class="row">
    <div class="col-lg-12 grid-margin stretch-card">
      <div class="card">
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-hover">
              <thead>
                <tr>
                  <th>Mã sản phẩm</th>
                  <th>Tên</th>
                  <th>Giá</th>
                  <th>Hình ảnh</th>
                </tr>
              </thead>
              <tbody>
                {{#each products}}
                  <tr>
                    <td>{{this._id}}</td>
                    <td>
                      <a href="/san-pham/chi-tiet/{{this._id}}">{{this.name}}</a>
                    </td>
                    <td>{{this.price}}</td>
                    <td>
                      <img src="{{this.image}}" alt="Hinh anh" />
                    </td>
                    <td>
                      <a href="#" class="btn btn-link" onclick="onRemove('{{this._id}}')">Delete</a>
                    </td>
                  </tr>
                {{/each}}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<script>


const onRemove = id => {
  swal({
    title: "Are you sure?",
    text: "Once deleted, you will not be able to recover",
    icon: "warning",
    buttons: true,
    dangerMode: true,
})
.then((willDelete) => {
  if (willDelete) {
    const url = `/san-pham/xoa/${id}`;
    fetch(url,{
        method: 'POST',
        headers: {'Content-Type' : 'application/json'},
    }).then(res => res.json())
        .then(data => {
             swal("Poof! Your imaginary file has been deleted!", {
              icon: "success",
              });
              window.location.reload();
           });
  } 
});

}


</script>